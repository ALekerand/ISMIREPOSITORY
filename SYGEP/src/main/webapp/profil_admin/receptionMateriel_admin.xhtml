<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

	<ui:composition template="/templates/template.xhtml">
			<ui:define name="body">
				<h:form id="form">
				<p:messages autoUpdate="true" closable="true" showDetail="false"/>
				<p:panel header="LIESTES DES DEMANDES VALIDEES" >
				
						<p:dataTable id="table" var="var" value="#{receptionMaterielleController.listDemandeAccepterAdmin}"  selectionMode="single" selection="#{receptionMaterielleController.selectedObject}" rowKey="{#{var.idDemande}"  paginator="true" paginatorPosition="bottom" rows="5" rowsPerPageTemplate="5,10,15,{ShowAll|'All'}">
 							<f:facet name="header">DEMANDES EN ENTENTE DE RECEPTION</f:facet>
  								   <p:ajax event="rowSelect" process="@this"  update="form" listener="#{receptionMaterielleController.selectionnerLigne}"></p:ajax>
   							
   							<p:column selectionMode="single" style="width:16px;text-align:center"/>
							<p:column headerText="Demandeur">
  							<h:outputText value="#{var.entite.personne.nomPersonne} "/>
 							</p:column>
   		
   										<p:column headerText="Code" >
      								    <h:outputText value="#{var.codeDemande}"/>
     								    </p:column>
        
      								    <p:column headerText="Materiel">
      								    <h:outputText value="#{var.materiel.nomMateriel}"/>
     								    </p:column>
        
       								   <p:column headerText="QuantitÃ©">
                                       <h:outputText value="#{var.qteDemande}"/>
                                       </p:column>
                                       
                                         <p:column headerText="Etat Demande">
                                       <h:outputText value="#{var.etatDemande.libEtatDemande}"/>
                                       </p:column>
                                       
                                        <p:column headerText="Date Demande">
                                       <h:outputText value="#{var.dateDemande}">
                                       <f:convertDateTime pattern="dd/MM/YYYY" type="date"/>
                                       </h:outputText>
                                       </p:column>
                                      
                                       <p:column headerText="Etat reception">
                                             <h:panelGrid columns="2"  >
                <p:commandButton value="Receptionner" actionListener="#{receptionMaterielleController.receptionner}" update="form" >
                <f:setPropertyActionListener value="#{variable}" target="#{receptionMaterielleController.selectedObject}"/>
                </p:commandButton>
                </h:panelGrid>
                                       </p:column>
                       </p:dataTable>
                       </p:panel>
           </h:form>
         </ui:define>
       </ui:composition>
</html>
