<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<h:head></h:head> 
<body> 

	<ui:composition template="/templates/template.xhtml">
			<ui:define name="body">
				<h:form id="form">
				<p:panel header="CONSULTATION DES DEMANDES" >
				
				<p:messages autoUpdate="true" closable="true" showDetail="false"/>
				<fieldset>
				 <h:panelGrid columns="4" cellpadding="15"  style="margin: 15px;" >
					<p:outputLabel for="cb_etat_demande" value="Etat Demande:"/>
						<p:selectOneMenu id="cb_etat_demande"  value="#{consulterDemandeController_Admin.idEtatDemande}">
						<f:selectItem itemLabel="Tout" itemValue="0"/>
						<f:selectItems value="#{consulterDemandeController_Admin.listEtatDemande}" var="tata" itemLabel="#{tata.libEtatDemande}" itemValue="#{tata.idEtatDemande}"></f:selectItems>
					
					</p:selectOneMenu>	
				<p:commandButton value="Afficher" actionListener="#{consulterDemandeController_Admin.traiterDemande}" update="table"></p:commandButton>
				</h:panelGrid>
				</fieldset>
				<br />
					 <br />
						<p:dataTable id="table" var="var" value="#{consulterDemandeController_Admin.listeDemande }"  paginator="true" paginatorPosition="bottom" rows="10"  rowsPerPageTemplate="5,10,15,{ShowAll|'All'}">
 							<f:facet name="header">LISTE DES DEMANDES</f:facet>
   										<p:column headerText="Demandeur">
     								    <h:outputText value="#{var.entite.personne.nomPersonne} #{var.entite.personne.prenomsPersonne}"/>
    								    </p:column>
   		
   										<p:column headerText="Code" >
      								    <h:outputText value="#{var.codeDemande}"/>
     								    </p:column>
        
      								    <p:column headerText="Materiel">
      								    <h:outputText value="#{var.materiel.nomMateriel}"/>
     								    </p:column>
        
       								   <p:column headerText="QuantitÃ©">
                                       <h:outputText value="#{var.qteDemande}"/>
                                       </p:column>
                                       
                                         <p:column headerText="Etat Demande">
                                       <h:outputText value="#{var.etatDemande.libEtatDemande}"/>
                                       </p:column>
                                      
                       </p:dataTable>
                    </p:panel>
                      				<br/>
										<p:toolbar >
											<f:facet name="left">
											<p:commandButton value="Annuler"  action="#{consulterDemandeController_Admin.annuler}" update="table" ></p:commandButton>
											<p:commandButton value="Imprimer" >
											<p:printer target="table"></p:printer>
											</p:commandButton>
											</f:facet>
										</p:toolbar>
				</h:form>
			</ui:define>
	</ui:composition>
</body> 
</html>
